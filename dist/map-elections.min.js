var MapElections;!function(e){var n=["Nombre d'inscrits","Nombre de votants","% Participation","Nuls","Blancs","Total exprimés","Pourcentage de suffrages exprimés","M. Nicolas DUPONT-AIGNAN","Total M. Nicolas DUPONT-AIGNAN","Mme Marine LE PEN","Total Mme Marine LE PEN","M. Emmanuel MACRON","Total M. Emmanuel MACRON","M. Benoît HAMON","Total  M. Benoît HAMON","Mme Nathalie ARTHAUD","Total Mme Nathalie ARTHAUD","M. Philippe POUTOU","Total M. Philippe POUTOU","M. Jacques CHEMINADE","Total  M. Jacques CHEMINADE","M. Jean LASSALLE","Total  M. Jean LASSALLE ","M. Jean-Luc MÉLENCHON","Total  M. Jean-Luc MÉLENCHON","M. François ASSELINEAU","Total  M. François ASSELINEAU","M. François FILLON","Total  M. François FILLON"],t=function(){function e(){}return e.prototype.get=function(e,n,t){var a=new XMLHttpRequest;a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&(200===a.status?"function"==typeof n&&n(JSON.parse(a.responseText)):"function"==typeof t&&t(a.status,a.statusText))},a.open("GET",e,!0),a.send(null)},e}(),a=function(){function e(){}return e.update=function(e,n){setTimeout(function(){var t=(e/(n-1)*100).toFixed();document.querySelector(".progress").innerHTML=t+"%","100"===t&&(document.querySelector(".progress").innerHTML=t+"%",setTimeout(function(){document.querySelector(".loading-box")&&document.querySelector(".loading-box").parentNode.removeChild(document.querySelector(".loading-box"))},300))},300)},e}(),o=function(){function e(){(new t).get("data/data.json",function(n){n.forEach(function(t,o){var r=new RichMarker({position:new google.maps.LatLng(t.lat,t.lng),map:map,anchor:RichMarkerPosition.BOTTOM,content:'<div class="my-marker"><div class="pin" style="background: '+i.getRandomColor()+'"></div></div>'});r.addListener("click",function(){e.iw||(e.iw=new s),map.panTo(r.getPosition()),e.iw.open(t)}),map.addListener("bounds_changed",function(){e.iw&&e.iw.close()}),document.getElementById("map").style.opacity="1",a.update(o,n.length)})})}return e}(),s=function(){function e(){this.opened=!1;var e=this;document.getElementById("panel").addEventListener("click",function(){return e.close()})}return e.prototype.close=function(){document.getElementById("panel").className=document.getElementById("panel").className.replace("opened",""),this.opened=!1},e.prototype.open=function(n){var t=this;this.opened&&this.close(),setTimeout(function(){return document.getElementById("panel").className+="opened"},300),t.opened=!0,e.setContent(t.getTemplate(n))},e.prototype.getTemplate=function(e){var t='<span class="panel-content"><span class="panel-header">'+e.city+", "+e.country+'</span><span class="panel-body">';return e.values.forEach(function(a,o){var s=i.getParty(n[o].replace("%","")).color;o<7&&(t+='<span class="row half"><span class="title">'+n[o]+'</span><span class="value">'+a+"</span></span>"),o>=7&&o%2==1&&(t+='<span class="row">\n                                <span class="line" style="width: '+a.replace(",",".")+"%;background: "+s+'"></span>\n                                <span class="title">'+n[o].replace("%","")+'</span>\n                                <span class="value">'+a+'% - <span class="nb">'+e.values[o+1]+" votes</span></span>\n                            </span>")}),t+="</span>",t+="</span>"},e.setContent=function(e){document.getElementById("panel").innerHTML=e},e}(),i=function(){function e(){}return e.getRandomColor=function(){for(var e="#",n=0;n<6;n++)e+="789ABCDEF"[Math.floor(9*Math.random())];return e},e.isPortrait=function(){return window.innerHeight>window.innerWidth},e.getParty=function(e){var n;switch(e){case"M. Nicolas DUPONT-AIGNAN":n={sigle:"DLF",nom:"Debout La France",color:"#8040C0"};break;case"Mme Marine LE PEN":n={sigle:"FN",nom:"Front National",color:"#c0c0c0"},n="fn";break;case"M. Emmanuel MACRON":n={sigle:"EM",nom:"En Marche",color:"#ffeb00"};break;case"M. Benoît HAMON":n={sigle:"PS",nom:"Parti Socialiste",color:"#ff8080"};break;case"Mme Nathalie ARTHAUD":n={sigle:"LO",nom:"Lutte ouvrière",color:"#bb0000"};break;case"M. Philippe POUTOU":n={sigle:"NPA",nom:"Nouveau parti anticapitaliste",color:"#bb0000"};break;case"M. Jacques CHEMINADE":n={sigle:"S&P",nom:"Solidarité et progrès",color:"#f0f0f0"};break;case"M. Jean LASSALLE":n={sigle:"",nom:"Résistons",color:"#ff9900"};break;case"M. Jean-Luc MÉLENCHON":n={sigle:"FI",nom:"La France Insoumise",color:"#dd0000"};break;case"M. François ASSELINEAU":n={sigle:"UPR",nom:"Union Populaire Républicaine",color:"#f0f0f0"};break;case"M. François FILLON":n={sigle:"LR",nom:"Les Républicains",color:"#0066cc"};break;default:n={color:"transparent"}}return n},e}(),r=function(){function e(){(new t).get("data/map_style.json",function(e){map=new google.maps.Map(document.getElementById("map"),{center:i.isPortrait()?{lat:45,lng:2.2775}:{lat:14,lng:2.2775},zoom:i.isPortrait()?5:2,styles:e,disableDefaultUI:!0}),setTimeout(function(){new o},1e3)})}return e}();e.InitMap=r}(MapElections||(MapElections={}));